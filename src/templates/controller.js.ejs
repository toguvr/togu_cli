import { Request, Response } from 'express';

import { container } from 'tsyringe';
import <%= props.nameUpperFirstCase %>Service from '../../../services/<%= props.nameUpperFirstCase %>Service';

export default class <%= props.nameUpperFirstCase %>Controller {
  public async show(request: Request, response: Response): Promise<Response> {
    const user_id = request.user.id;
    const { <%= props.name %>Id } = request.params;

    const service = container.resolve(<%= props.nameUpperFirstCase %>Service);

    const result = await service.show({
      <%= props.name %>Id,
      user_id
    });

    return response.json(result);
  }

  public async list(request: Request, response: Response): Promise<Response> {
    const user_id = request.user.id;

    const service = container.resolve(<%= props.nameUpperFirstCase %>Service);

    const result = await service.list(user_id);

    return response.json(result);
  }

  public async create(request: Request, response: Response): Promise<Response> {
    const user_id = request.user.id;
    const body = request.body;

    const service = container.resolve(<%= props.nameUpperFirstCase %>Service);

    const result = await service.create({
     body,
     user_id
    });

    return response.json(result);
  }
  
  public async update(request: Request, response: Response): Promise<Response> {
    const user_id = request.user.id;
    const body = request.body;

    const service = container.resolve(<%= props.nameUpperFirstCase %>Service);

    const result = await service.update({
     body,
     user_id,
    });

    return response.json(result);
  }

  public async delete(request: Request, response: Response): Promise<Response> {
    const user_id = request.user.id;
    const { <%= props.name %>Id } = request.params;

    const service = container.resolve(<%= props.nameUpperFirstCase %>Service);

    const result = await service.delete({
      <%= props.name %>Id,
      user_id,
    });

    return response.json(result);
  }
}
